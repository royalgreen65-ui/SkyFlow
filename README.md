# SkyFlow Weather Engine & Bridge CLI

SkyFlow is a professional-grade weather simulation and flight planning suite designed for Microsoft Flight Simulator X (FSX) and Prepar3D (P3D). It features real-time METAR injection using the Google Gemini API and a dedicated Bridge CLI to interface directly with the simulator's SimConnect engine.

## üöÄ Quick Start

### 1. Prerequisites
- **Windows OS**: Required for FSX/P3D and SimConnect.
- **Node.js**: Installed on your machine (Download at [nodejs.org](https://nodejs.org/)).
- **Flight Simulator**: FSX or P3D must be installed and reachable via SimConnect.

### 2. Building the Executable (.exe)
To run the bridge without keeping a terminal open or if you want a standalone tool:
1. Open the project folder.
2. Double-click `create-exe.bat`.
3. This script will:
   - Install required dependencies (`ws`, `node-simconnect`).
   - Install the `pkg` compiler.
   - Generate `skyflow-bridge.exe` in the root directory.

---

## üõ†Ô∏è Installation & Setup

### Manual Installation (Development Mode)
If you prefer running from source instead of the `.exe`:
1. Open a terminal in the project directory.
2. Run `npm install` to install dependencies.
3. Start the bridge with `node bridge.js`.

### Running the Web Dashboard
1. Open `index.html` using a local web server (e.g., VS Code Live Server or `npx serve`).
2. Ensure your Gemini API Key is configured in your environment if you are modifying the source.

---

## üéÆ Operation Instructions

Follow this specific sequence to ensure a successful connection:

1. **Start FSX/P3D**: Load into a flight and ensure you are sitting on the runway or at a gate.
2. **Launch the Bridge**: Run `skyflow-bridge.exe` (or `node bridge.js`). You should see a message: `[SimConnect] SUCCESS: Connected to FSX/P3D`.
3. **Open the Dashboard**: Navigate to the SkyFlow web interface in your browser.
4. **Link the UI**: 
   - Look for the **BRIDGE: OK** status in the top bar.
   - Click the **Connect Sim** button in the sidebar.
   - The status should change to **FSX: LINKED**.
5. **Inject Weather**:
   - Enter an ICAO code (e.g., `KJFK`, `EGLL`) in the Dashboard.
   - Click **Inject**.
   - The weather in your simulator will update instantly to match the real-world METAR generated by the Gemini AI.

---

## üìÇ File Structure
- `App.tsx`: The main React web application interface.
- `bridge.js`: The Node.js source for the SimConnect bridge.
- `create-exe.bat`: Automation script for Windows users to build the standalone executable.
- `package.json`: Dependency manifest.
- `types.ts` / `constants.tsx`: Shared configurations and TypeScript definitions.

## ‚ùì Troubleshooting

- **"Bridge Missing"**: Ensure the `skyflow-bridge.exe` is running and your firewall isn't blocking port `8080`.
- **"Sim Not Detected"**: Ensure FSX/P3D is running *before* starting the bridge. If using FSX Steam Edition, ensure you have the SimConnect RTM/SP1/XPACK libraries installed.
- **Injection Fails**: Check the Bridge console for error messages. Ensure you are not in a paused state in the simulator.

---
*Developed for flight simulation enthusiasts.*